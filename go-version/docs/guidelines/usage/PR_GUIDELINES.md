# PR ä½¿ç”¨æŒ‡å—

> æœ¬æ–‡æ¡£åŒ…å« qkflow ä¸­æ‰€æœ‰ Pull Request ç›¸å…³åŠŸèƒ½çš„ä½¿ç”¨è¯´æ˜ï¼ŒåŒ…æ‹¬ PR å®¡æ‰¹ã€URL æ”¯æŒå’Œç¼–è¾‘å™¨åŠŸèƒ½ã€‚

---

## ğŸ“‹ ç›®å½•

- [PR å®¡æ‰¹åŠŸèƒ½](#-pr-å®¡æ‰¹åŠŸèƒ½)
  - [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
  - [URL æ”¯æŒ](#-url-æ”¯æŒ)
  - [å¸¸ç”¨å·¥ä½œæµ](#-å¸¸ç”¨å·¥ä½œæµ)
  - [ä½¿ç”¨æŠ€å·§](#-ä½¿ç”¨æŠ€å·§)
- [PR ç¼–è¾‘å™¨åŠŸèƒ½](#-pr-ç¼–è¾‘å™¨åŠŸèƒ½)
  - [åŠŸèƒ½æ¦‚è¿°](#-åŠŸèƒ½æ¦‚è¿°)
  - [ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹)
- [ç›¸å…³å‘½ä»¤](#-ç›¸å…³å‘½ä»¤)

---

## âœ… PR å®¡æ‰¹åŠŸèƒ½

`qkflow pr approve` å‘½ä»¤å¯ä»¥å¿«é€Ÿå®¡æ‰¹ Pull Requestï¼Œæ”¯æŒ URL æ“ä½œå’Œè‡ªåŠ¨åˆå¹¶åŠŸèƒ½ã€‚

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### åŸºæœ¬å®¡æ‰¹

```bash
# é€šè¿‡ PR ç¼–å·å®¡æ‰¹ï¼ˆé»˜è®¤ä½¿ç”¨ ğŸ‘ è¯„è®ºï¼‰
qkflow pr approve 123

# é€šè¿‡ URL å®¡æ‰¹ï¼ˆå¯ä»¥ä»ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼ï¼‰
qkflow pr approve https://github.com/brain/planning-api/pull/2001

# ä¹Ÿæ”¯æŒ /filesã€/commitsã€/checks ç­‰ URL
qkflow pr approve https://github.com/brain/planning-api/pull/2001/files

# è‡ªåŠ¨æ£€æµ‹å½“å‰åˆ†æ”¯çš„ PR
qkflow pr approve
```

#### è‡ªå®šä¹‰è¯„è®º

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å®¡æ‰¹éƒ½ä½¿ç”¨ ğŸ‘ ä½œä¸ºè¯„è®ºã€‚å¯ä»¥ä½¿ç”¨ `-c` æ ‡å¿—è‡ªå®šä¹‰ï¼š

```bash
# è‡ªå®šä¹‰è¯„è®º
qkflow pr approve 123 -c "LGTM! ğŸ‰"

# é€šè¿‡ URL å®¡æ‰¹å¹¶æ·»åŠ è‡ªå®šä¹‰è¯„è®º
qkflow pr approve https://github.com/owner/repo/pull/456 -c "Great work!"
```

#### è‡ªåŠ¨åˆå¹¶

```bash
# ä¸€æ­¥å®Œæˆå®¡æ‰¹å’Œåˆå¹¶
qkflow pr approve 123 --merge

# é€šè¿‡ URL å®¡æ‰¹å¹¶åˆå¹¶
qkflow pr approve https://github.com/owner/repo/pull/789 -c "Ship it! ğŸš€" -m

# çŸ­æ ‡å¿—
qkflow pr approve 123 -m
```

---

### ğŸŒ URL æ”¯æŒ

ç°åœ¨ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ **GitHub PR URL** ä¸ `pr approve` å’Œ `pr merge` å‘½ä»¤ï¼æ— éœ€åœ¨ä»“åº“ç›®å½•ä¸­æˆ–è®°ä½ PR ç¼–å·ã€‚

#### æ”¯æŒçš„ URL æ ¼å¼

æ‰€æœ‰è¿™äº›æ ¼å¼éƒ½å¯ä»¥å·¥ä½œï¼š

```
âœ… https://github.com/owner/repo/pull/123
âœ… https://github.com/owner/repo/pull/123/files      (Files æ ‡ç­¾é¡µ)
âœ… https://github.com/owner/repo/pull/123/commits    (Commits æ ‡ç­¾é¡µ)
âœ… https://github.com/owner/repo/pull/123/checks     (Checks æ ‡ç­¾é¡µ)
âœ… http://github.com/owner/repo/pull/123
âœ… github.com/owner/repo/pull/123
âœ… https://github.com/owner/repo/pull/123?comments=all
âœ… https://github.com/owner/repo/pull/123#discussion_r123456
```

**ä¸“ä¸šæç¤º**ï¼šåªéœ€ä»ä»»ä½• PR æ ‡ç­¾é¡µï¼ˆOverviewã€Filesã€Commitsã€Checksï¼‰å¤åˆ¶ URLï¼Œå®ƒå°±èƒ½å·¥ä½œï¼ğŸ‰

#### ä½¿ç”¨åœºæ™¯

**è·¨ä»“åº“å®¡æŸ¥**ï¼š
```bash
qkflow pr approve https://github.com/team/frontend/pull/100 -c "Approved"
qkflow pr approve https://github.com/team/backend/pull/200 -c "Approved"
```

**æµè§ˆå™¨åˆ° CLI å·¥ä½œæµ**ï¼š
1. åœ¨ GitHub ç½‘é¡µä¸­æ‰“å¼€ PR
2. ä»åœ°å€æ å¤åˆ¶ URL
3. ç²˜è´´åˆ°ç»ˆç«¯ï¼š`qkflow pr approve <paste-url-here> -c "Looks good!"`

**ä¸ `pbpaste` é…åˆä½¿ç”¨ï¼ˆmacOSï¼‰**ï¼š
```bash
# åœ¨æµè§ˆå™¨ä¸­å¤åˆ¶ URLï¼Œç„¶åï¼š
qkflow pr approve "$(pbpaste)" -c "Approved!"
```

#### ä½•æ—¶ä½¿ç”¨ URL vs ç¼–å·

| åœºæ™¯ | ä½¿ç”¨ | ç¤ºä¾‹ |
|------|------|------|
| ä½ çš„ä»“åº“ï¼Œåœ¨ git ç›®å½•ä¸­ | ç¼–å· | `qkflow pr approve 123` |
| ä½ çš„ä»“åº“ï¼Œå½“å‰åˆ†æ”¯ | æ—  | `qkflow pr approve` |
| ä¸åŒä»“åº“ | URL | `qkflow pr approve https://...` |
| ä»æµè§ˆå™¨åˆ†äº«çš„é“¾æ¥ | URL | å¤åˆ¶å¹¶ç²˜è´´ URL |

---

### ğŸ“‹ å¸¸ç”¨å·¥ä½œæµ

#### å·¥ä½œæµ 1ï¼šå¿«é€Ÿä»£ç å®¡æŸ¥

```bash
# 1. æ£€å‡ºä»–ä»¬çš„åˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
git fetch origin
git checkout feature-branch

# 2. å®¡æŸ¥ä»£ç ...

# 3. å®¡æ‰¹
qkflow pr approve
# è‡ªåŠ¨ä»åˆ†æ”¯æ‰¾åˆ° PR â†’ æ·»åŠ å¯é€‰è¯„è®º â†’ å®Œæˆï¼
```

#### å·¥ä½œæµ 2ï¼šå®¡æ‰¹å¹¶åˆå¹¶

```bash
# ä¸€ä¸ªå‘½ä»¤å®Œæˆå®¡æ‰¹å’Œåˆå¹¶
qkflow pr approve 123 -c "Approved! Merging now." --merge

# æ‰§è¡Œè¿‡ç¨‹ï¼š
# âœ… å®¡æ‰¹ PR â†’ âœ… æ·»åŠ è¯„è®º â†’ âœ… æ£€æŸ¥å¯åˆå¹¶æ€§
# âœ… ç¡®è®¤ â†’ âœ… åˆå¹¶ â†’ âœ… æ¸…ç†åˆ†æ”¯
```

#### å·¥ä½œæµ 3ï¼šæ‰¹é‡å®¡æ‰¹

```bash
# é¦–å…ˆåˆ—å‡ºæ‰€æœ‰æ‰“å¼€çš„ PR
gh pr list

# é€ä¸ªå®¡æ‰¹
qkflow pr approve 101 -c "Approved"
qkflow pr approve 102 -c "Approved"
qkflow pr approve 103 -c "Approved"
```

#### å·¥ä½œæµ 4ï¼šäº¤äº’æ¨¡å¼

```bash
# ä¸å¸¦å‚æ•°è¿è¡Œï¼Œå·¥å…·ä¼šè‡ªåŠ¨å¸®ä½ é€‰æ‹©
qkflow pr approve

# æ‰§è¡Œè¿‡ç¨‹ï¼š
# 1. å°è¯•ä»å½“å‰åˆ†æ”¯æ‰¾åˆ° PR
# 2. å¦‚æœæœªæ‰¾åˆ°ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ‰“å¼€çš„ PR åˆ—è¡¨
# 3. ä½ é€‰æ‹©ä¸€ä¸ª â†’ 4. è¯¢é—®å¯é€‰è¯„è®º â†’ 5. å®¡æ‰¹ï¼
```

---

### ğŸ’¡ ä½¿ç”¨æŠ€å·§

#### æŠ€å·§ 1ï¼šåˆ«å

æ·»åŠ åˆ° `.bashrc` æˆ– `.zshrc`ï¼š

```bash
alias approve='qkflow pr approve'
alias merge='qkflow pr approve --merge'

# ä½¿ç”¨ï¼š
approve 123 -c "LGTM"
merge 123
```

#### æŠ€å·§ 2ï¼šè¯„è®ºæ¨¡æ¿

ä¿å­˜å¸¸ç”¨è¯„è®ºï¼š

```bash
# åœ¨ shell é…ç½®ä¸­
export APPROVE_LGTM="Looks good to me! ğŸ‘"
export APPROVE_MINOR="Approved with minor comments. Please address in follow-up."

# ä½¿ç”¨ï¼š
qkflow pr approve 123 -c "$APPROVE_LGTM"
```

#### æŠ€å·§ 3ï¼šåˆå¹¶å‰æ£€æŸ¥

åœ¨ä½¿ç”¨ `--merge` ä¹‹å‰ï¼ŒéªŒè¯ PRï¼š

```bash
# æŸ¥çœ‹ PR è¯¦æƒ…å’Œ CI çŠ¶æ€
gh pr view 123
gh pr checks 123

# å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå®¡æ‰¹å¹¶åˆå¹¶
qkflow pr approve 123 -m
```

---

### âš ï¸ é”™è¯¯å¤„ç†

#### PR æœªæ‰¾åˆ°

```bash
$ qkflow pr approve 999
âŒ Failed to get PR: Pull request not found
```

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `gh pr list` æ£€æŸ¥ PR ç¼–å·

#### PR å·²å…³é—­

```bash
$ qkflow pr approve 123
âŒ PR is not open (state: closed)
```

**è§£å†³æ–¹æ¡ˆ**ï¼šPR å·²ç»åˆå¹¶æˆ–å…³é—­

#### æ— æ³•åˆå¹¶

```bash
$ qkflow pr approve 123 -m
âœ… PR approved!
âš ï¸ Cannot merge PR: PR has conflicts and cannot be merged
```

**è§£å†³æ–¹æ¡ˆ**ï¼šå…ˆè§£å†³å†²çªï¼Œç„¶åå†åˆå¹¶

---

## ğŸ“ PR ç¼–è¾‘å™¨åŠŸèƒ½

`qkflow pr create` å‘½ä»¤åŒ…å«ä¸€ä¸ªå¯é€‰æ­¥éª¤ï¼Œç”¨äºæ·»åŠ åŒ…å«å¯Œåª’ä½“ï¼ˆå›¾ç‰‡/è§†é¢‘ï¼‰çš„è¯¦ç»†æè¿°ã€‚

### ğŸ¯ åŠŸèƒ½æ¦‚è¿°

åœ¨åˆ›å»º PR æ—¶ï¼Œç³»ç»Ÿä¼šæç¤ºä½ æ˜¯å¦æ·»åŠ è¯¦ç»†æè¿°ï¼š

```bash
? æ·»åŠ è¯¦ç»†æè¿°å’Œå›¾ç‰‡/è§†é¢‘ï¼Ÿ
  > â­ï¸  è·³è¿‡ï¼ˆé»˜è®¤ï¼‰      # æŒ‰ Enter è·³è¿‡
    âœ… æ˜¯ï¼Œç»§ç»­        # æŒ‰ Space åˆ‡æ¢ï¼Œç„¶åæŒ‰ Enter
```

å¦‚æœé€‰æ‹©"æ˜¯ï¼Œç»§ç»­"ï¼Œä¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Web ç¼–è¾‘å™¨ã€‚

#### Web ç¼–è¾‘å™¨ç‰¹æ€§

- **GitHub é£æ ¼ç•Œé¢**ï¼šç†Ÿæ‚‰çš„æ·±è‰²ä¸»é¢˜ï¼ŒåŒ¹é… GitHub çš„ UI
- **Markdown ç¼–è¾‘å™¨**ï¼šå¸¦å®æ—¶é¢„è§ˆå’Œæ ¼å¼åŒ–å·¥å…·æ 
- **æ‹–æ”¾æ”¯æŒ**ï¼šä» Finder/Explorer æ‹–æ”¾å›¾ç‰‡/è§†é¢‘
- **ç²˜è´´æ”¯æŒ**ï¼šç›´æ¥ä»å‰ªè´´æ¿ç²˜è´´å›¾ç‰‡ï¼ˆCmd+V / Ctrl+Vï¼‰
- **æ”¯æŒçš„æ ¼å¼**ï¼š
  - å›¾ç‰‡ï¼šPNGã€JPGã€JPEGã€GIFã€WebPã€SVG
  - è§†é¢‘ï¼šMP4ã€MOVã€WebMã€AVI

#### è‡ªåŠ¨ä¸Šä¼ å’Œè¯„è®º

ä¿å­˜åä¼šè‡ªåŠ¨ï¼š
1. ä¸Šä¼ å›¾ç‰‡åˆ° GitHub å’Œ Jira
2. è½¬æ¢æœ¬åœ°è·¯å¾„ä¸ºåœ¨çº¿ URLï¼ˆåœ¨ markdown ä¸­ï¼‰
3. æ·»åŠ è¯„è®ºåˆ° GitHub PR å’Œ Jira issue
4. æ¸…ç†ä¸´æ—¶æ–‡ä»¶

---

### ğŸ“ ä½¿ç”¨ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šå¸¦æˆªå›¾çš„ Bug ä¿®å¤

```markdown
## æè¿°

ä¿®å¤äº†ç™»å½•æŒ‰é’®æ‚¬åœçŠ¶æ€é—®é¢˜ï¼ŒæŒ‰é’®åœ¨æ‚¬åœæ—¶ä¸ä¼šæ”¹å˜é¢œè‰²ã€‚

### ä¿®å¤å‰å

![ä¿®å¤å‰](./before.png)
![ä¿®å¤å](./after.png)

### æ‰€åšçš„æ›´æ”¹

- æ›´æ–°äº† CSS æ‚¬åœé€‰æ‹©å™¨
- æ·»åŠ äº†è¿‡æ¸¡åŠ¨ç”»
- ä¿®å¤äº†é¢œè‰²å¯¹æ¯”åº¦
```

#### ç¤ºä¾‹ 2ï¼šå¸¦æ¼”ç¤ºè§†é¢‘çš„åŠŸèƒ½

```markdown
## æ–°åŠŸèƒ½ï¼šç”¨æˆ·å¤´åƒä¸Šä¼ 

å®ç°äº†ç”¨æˆ·ä¸ªäººèµ„æ–™å¤´åƒä¸Šä¼ åŠŸèƒ½ã€‚

### æ¼”ç¤º

![æ¼”ç¤ºè§†é¢‘](./demo.mp4)

### åŠŸèƒ½

- æ‹–æ”¾æ”¯æŒ
- å›¾ç‰‡è£å‰ª
- ä¸Šä¼ å‰é¢„è§ˆ
- è‡ªåŠ¨è°ƒæ•´å¤§å°ä¸º 256x256
```

#### å®Œæ•´å·¥ä½œæµç¤ºä¾‹

```bash
$ qkflow pr create NA-9245

âœ“ æ‰¾åˆ° Jira issue: ä¿®å¤ç™»å½•æŒ‰é’®æ ·å¼
ğŸ“ é€‰æ‹©å˜æ›´ç±»å‹ï¼šğŸ› Bug fix

? æ·»åŠ è¯¦ç»†æè¿°å’Œå›¾ç‰‡/è§†é¢‘ï¼Ÿ
  > â­ï¸  è·³è¿‡ï¼ˆé»˜è®¤ï¼‰
    âœ… æ˜¯ï¼Œç»§ç»­        # ç”¨æˆ·é€‰æ‹©æ­¤é¡¹

ğŸŒ åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç¼–è¾‘å™¨...
ğŸ“ è¯·åœ¨æµè§ˆå™¨ä¸­ç¼–è¾‘å†…å®¹å¹¶ç‚¹å‡» 'ä¿å­˜å¹¶ç»§ç»­'

âœ… å†…å®¹å·²ä¿å­˜ï¼ï¼ˆ245 ä¸ªå­—ç¬¦ï¼Œ2 ä¸ªæ–‡ä»¶ï¼‰
âœ… Pull request å·²åˆ›å»º: https://github.com/owner/repo/pull/123
âœ… æè¿°å·²æ·»åŠ åˆ° GitHub PR å’Œ Jira
âœ… å…¨éƒ¨å®Œæˆï¼ğŸ‰
```

---

### ğŸ› å·²çŸ¥é™åˆ¶

1. **è§†é¢‘**ï¼šç›®å‰åªæœ‰å›¾ç‰‡ä½œä¸ºå†…è”æ•°æ® URL ä¸Šä¼ ã€‚è§†é¢‘éœ€è¦å¤–éƒ¨æ‰˜ç®¡ã€‚
2. **æ–‡ä»¶å¤§å°**ï¼šå¤§æ–‡ä»¶ï¼ˆ>10MBï¼‰å¯èƒ½è¢« GitHub/Jira æ‹’ç»
3. **æµè§ˆå™¨**ï¼šéœ€è¦é…ç½®é»˜è®¤æµè§ˆå™¨
4. **ä¸´æ—¶ç«¯å£**ï¼šä½¿ç”¨éšæœºç«¯å£ - åœ¨æå°‘æ•°æƒ…å†µä¸‹å¯èƒ½å†²çª

---

## ğŸ“š ç›¸å…³å‘½ä»¤

### PR ç›¸å…³å‘½ä»¤

```bash
# PR åˆ›å»º
qkflow pr create [ticket]              # åˆ›å»º PRï¼ˆå¯é€‰ä½¿ç”¨ç¼–è¾‘å™¨ï¼‰

# PR å®¡æ‰¹
qkflow pr approve [number|url]         # å®¡æ‰¹ PR
qkflow pr approve [number|url] -c "è¯„è®º" # å¸¦è¯„è®ºå®¡æ‰¹
qkflow pr approve [number|url] -m      # å®¡æ‰¹å¹¶åˆå¹¶

# PR åˆå¹¶
qkflow pr merge [number|url]           # åˆå¹¶ PRï¼ˆä¸å…ˆå®¡æ‰¹ï¼‰

# æŸ¥çœ‹ PRï¼ˆä½¿ç”¨ GitHub CLIï¼‰
gh pr view [number]                    # æŸ¥çœ‹ PR è¯¦æƒ…
gh pr checks [number]                  # æ£€æŸ¥ CI çŠ¶æ€
gh pr list                             # åˆ—å‡ºæ‰€æœ‰ PR
```

### å‘½ä»¤æ ‡å¿—

| æ ‡å¿— | çŸ­æ ‡å¿— | æè¿° |
|------|--------|------|
| `--comment` | `-c` | åœ¨å®¡æ‰¹æ—¶æ·»åŠ è¯„è®º |
| `--merge` | `-m` | å®¡æ‰¹åè‡ªåŠ¨åˆå¹¶ |
| `--help` | `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |

---

## ğŸ†š ä¸ GitHub CLI å¯¹æ¯”

### GitHub CLI (`gh`)

```bash
# å®¡æ‰¹
gh pr review 123 --approve --body "LGTM"

# ç„¶åå•ç‹¬åˆå¹¶
gh pr merge 123

# ç„¶åæ¸…ç†
git checkout main
git pull
git branch -D feature-branch
```

### qkflow

```bash
# ä¸€æ­¥å®Œæˆï¼
qkflow pr approve 123 -c "LGTM" -m
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ›´å°‘çš„å‘½ä»¤
- âœ… è‡ªåŠ¨æ¸…ç†åˆ†æ”¯
- âœ… äº¤äº’å¼æç¤º
- âœ… åˆ†æ”¯è‡ªåŠ¨æ£€æµ‹
- âœ… åˆå¹¶éªŒè¯
- âœ… URL æ”¯æŒï¼ˆè·¨ä»“åº“æ“ä½œï¼‰

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Jira ä½¿ç”¨æŒ‡å—](./JIRA_GUIDELINES.md) - Jira åŠŸèƒ½å®Œæ•´ä½¿ç”¨æŒ‡å—
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](../QUICKSTART.md) - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
- [è‡ªåŠ¨æ›´æ–°æŒ‡å—](./AUTO_UPDATE_GUIDELINES.md) - è‡ªåŠ¨æ›´æ–°åŠŸèƒ½è¯´æ˜

---

**æœ€åæ›´æ–°**ï¼š2025-12-05
